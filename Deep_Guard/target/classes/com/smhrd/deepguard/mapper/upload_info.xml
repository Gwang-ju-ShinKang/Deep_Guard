<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smhrd.deepguard.mapper.UploadInfoMapper">

    <!-- 모든 업로드 데이터 조회 -->
    <select id="findAll" resultType="com.smhrd.deepguard.entity.upload_info">
        SELECT * FROM upload_info
    </select>

    <!-- 특정 업로드 데이터 조회 (image_idx 기준) -->
    <select id="findById" parameterType="long" resultType="com.smhrd.deepguard.entity.upload_info">
        SELECT * FROM upload_info WHERE image_idx = #{image_idx}
    </select>

    <!-- 새로운 업로드 데이터 삽입 -->
    <insert id="insert" parameterType="com.smhrd.deepguard.entity.upload_info">
        INSERT INTO upload_info (image_file, image_data, deepfake_data, learning_content, model_pred, created_at, user_id, assent_yn)
        VALUES (#{image_file}, #{image_data}, #{deepfake_data}, #{learning_content}, #{model_pred}, #{created_at}, #{user_id}, #{assent_yn})
    </insert>

    <!-- 기존 업로드 데이터 업데이트 -->
    <update id="update" parameterType="com.smhrd.deepguard.entity.upload_info">
        UPDATE upload_info
        SET image_file = #{image_file},
            image_data = #{image_data},
            deepfake_data = #{deepfake_data},
            learning_content = #{learning_content},
            model_pred = #{model_pred},
            created_at = #{created_at},
            user_id = #{user_id},
            assent_yn = #{assent_yn}
        WHERE image_idx = #{image_idx}
    </update>

    <!-- 특정 업로드 데이터 삭제 (image_idx 기준) -->
    <delete id="delete" parameterType="long">
        DELETE FROM upload_info WHERE image_idx = #{image_idx}
    </delete>
</mapper>
