<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smhrd.deepguard.mapper.ActivityLogInfoMapper">

    <!-- 모든 로그 조회 -->
    <select id="findAll" resultType="com.smhrd.deepguard.entity.activity_log_info">
        SELECT * FROM activity_log_info
    </select>

    <!-- 특정 로그 조회 (log_idx 기준) -->
    <select id="findById" parameterType="long" resultType="com.smhrd.deepguard.entity.activity_log_info">
        SELECT * FROM activity_log_info WHERE log_idx = #{log_idx}
    </select>

    <!-- 새로운 로그 삽입 -->
    <insert id="insert" parameterType="com.smhrd.deepguard.entity.activity_log_info">
        INSERT INTO activity_log_info (usdr_id, log_device, log_session, log_time, report_btn, session_expire_dt)
        VALUES (#{usdr_id}, #{log_device}, #{log_session}, #{log_time}, #{report_btn}, #{session_expire_dt})
    </insert>

    <!-- 기존 로그 업데이트 -->
    <update id="update" parameterType="com.smhrd.deepguard.entity.activity_log_info">
        UPDATE activity_log_info
        SET usdr_id = #{usdr_id},
            log_device = #{log_device},
            log_session = #{log_session},
            log_time = #{log_time},
            report_btn = #{report_btn},
            session_expire_dt = #{session_expire_dt}
        WHERE log_idx = #{log_idx}
    </update>

    <!-- 특정 로그 삭제 (log_idx 기준) -->
    <delete id="delete" parameterType="long">
        DELETE FROM activity_log_info WHERE log_idx = #{log_idx}
    </delete>
</mapper>
