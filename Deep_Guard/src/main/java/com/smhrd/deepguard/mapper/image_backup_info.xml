<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smhrd.deepguard.mapper.ImageBackupInfoMapper">

    <!-- 모든 백업 데이터 조회 -->
    <select id="findAll" resultType="com.smhrd.deepguard.entity.image_backup_info">
        SELECT * FROM image_backup_info
    </select>

    <!-- 특정 백업 데이터 조회 (backup_idx 기준) -->
    <select id="findById" parameterType="long" resultType="com.smhrd.deepguard.entity.image_backup_info">
        SELECT * FROM image_backup_info WHERE backup_idx = #{backup_idx}
    </select>

    <!-- 새로운 백업 데이터 삽입 -->
    <insert id="insert" parameterType="com.smhrd.deepguard.entity.image_backup_info">
        INSERT INTO image_backup_info (original_image_file, image_data, deepfake_data, log_device, log_session, created_at, user_id, model_pred)
        VALUES (#{original_image_file}, #{image_data}, #{deepfake_data}, #{log_device}, #{log_session}, #{created_at}, #{user_id}, #{model_pred})
    </insert>

    <!-- 기존 백업 데이터 업데이트 -->
    <update id="update" parameterType="com.smhrd.deepguard.entity.image_backup_info">
        UPDATE image_backup_info
        SET original_image_file = #{original_image_file},
            image_data = #{image_data},
            deepfake_data = #{deepfake_data},
            log_device = #{log_device},
            log_session = #{log_session},
            created_at = #{created_at},
            user_id = #{user_id},
            model_pred = #{model_pred}
        WHERE backup_idx = #{backup_idx}
    </update>

    <!-- 특정 백업 데이터 삭제 (backup_idx 기준) -->
    <delete id="delete" parameterType="long">
        DELETE FROM image_backup_info WHERE backup_idx = #{backup_idx}
    </delete>
</mapper>
